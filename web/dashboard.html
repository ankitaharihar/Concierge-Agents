<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ChronoKen ‚Äî Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Merriweather:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <div class="app">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="brand">
        <div class="logo">CK</div>
        <div class="brand-text">
          <div class="title">ChronoKen</div>
          <div class="sub">Time-Slicing AI</div>
        </div>
      </div>

      <nav class="menu">
        <button class="menu-item active" data-view="dashboard"><span class="icon">‚åÇ</span> Dashboard</button>
        <button class="menu-item" data-view="missions"><span class="icon">üóÇ</span> Missions</button>
        <button class="menu-item" data-view="timeslices"><span class="icon">üïí</span> Time Slices</button>
        <button class="menu-item" data-view="timeline"><span class="icon">üìÖ</span> Timeline</button>
        <button class="menu-item" data-view="focus"><span class="icon">üéØ</span> Focus Mode</button>
        <button class="menu-item" data-view="scrolls"><span class="icon">üìú</span> Scrolls</button>
        <button class="menu-item" data-view="analytics"><span class="icon">üìä</span> Analytics</button>
        <button class="menu-item" data-view="summon"><span class="icon">‚öîÔ∏è</span> Summon Ken</button>
      </nav>

      <div class="sidebar-bottom">
        <div class="profile">
          <img class="avatar" src="https://i.pravatar.cc/64?img=12" alt="avatar">
          <div>
            <div class="name">Ani</div>
            <div class="muted">Level 5 ‚Ä¢ Time Adept</div>
          </div>
        </div>
        <div class="small-cta">
          <button id="addTaskFloating" class="btn small">+ New Mission</button>
        </div>

        <div class="profile-actions" style="margin-top:10px;display:flex;gap:8px;align-items:center">
          <button id="profileBtn" class="btn ghost small">Profile</button>
          <button id="logoutBtn" class="btn ghost small">Logout</button>
        </div>
      </div>
    </aside>

    <!-- MAIN -->
    <main class="main">
      <header class="topbar">
        <div style="display:flex;align-items:center;gap:12px">
          <button id="sidebarToggle" class="btn ghost" aria-label="Toggle sidebar">‚ò∞</button>
          <div class="search">
            <input id="globalSearch" placeholder="Search tasks, notes, plans..." />
          </div>
        </div>

        <div class="top-actions">
          <button id="themeBtn" class="btn ghost">Theme</button>
          <button id="calendarSync" class="btn">Sync Calendar</button>
          <button id="openSummon" class="btn primary">Open Ken</button>
        </div>
      </header>

      <section id="view-dashboard" class="view active">
        <div class="grid">
          <!-- Left column -->
          <div class="col col-left">
            <div class="card">
              <div class="card-head">
                <h3>Today ‚Äî Snapshot</h3>
                <div class="muted">Quick actions</div>
              </div>

              <div class="today-grid">
                <div class="today-tasks">
                  <h4>Urgent Missions</h4>
                  <ul id="todayTasks"></ul>
                </div>

                <div class="today-plan">
                  <h4>Suggested Time Slices</h4>
                  <div id="todayPlan"></div>
                  <div class="plan-actions">
                    <button id="addPlanToCalendar" class="btn">Add to Calendar</button>
                    <button id="startFocusBtn" class="btn primary">Start Focus Mode</button>
                  </div>
                </div>
              </div>
            </div>

            <div class="card">
              <div class="card-head">
                <h3>Focus Mode</h3><div class="muted">Pomodoro & session stats</div>
              </div>
              <div class="focus-card">
                <div id="timerDisplay" class="timer">25:00</div>
                <div class="focus-controls">
                  <button id="startTimer" class="btn primary">Start</button>
                  <button id="pauseTimer" class="btn">Pause</button>
                  <button id="resetTimer" class="btn ghost">Reset</button>
                </div>
                <div class="muted small">Session count: <span id="sessionCount">0</span></div>
              </div>
            </div>

            <div class="card">
              <div class="card-head">
                <h3>Scrolls ‚Äî Quick Notes</h3><div class="muted">Capture ideas, convert to missions</div>
              </div>
              <div class="notes">
                <textarea id="quickNote" placeholder="Write a note..."></textarea>
                <div class="note-actions">
                  <button id="saveNote" class="btn">Save Note</button>
                  <button id="noteToTask" class="btn ghost">Convert ‚Üí Mission</button>
                </div>
                <ul id="notesList" class="notes-list"></ul>
              </div>
            </div>
          </div>

          <!-- Right column -->
          <div class="col col-right">
            <div class="card">
              <div class="card-head">
                <h3>Missions</h3>
                <div class="muted">Manage tasks & priorities</div>
              </div>

              <div class="missions-actions">
                <input id="newTaskTitle" placeholder="New mission title..." />
                <select id="newTaskPriority">
                  <option value="high">High</option>
                  <option value="medium" selected>Medium</option>
                  <option value="low">Low</option>
                </select>
                <input id="newTaskHours" type="number" min="0.25" step="0.25" value="1" />
                <button id="createTaskBtn" class="btn">Add Mission</button>
              </div>

              <ul id="missionsList" class="missions-list"></ul>
            </div>

            <div class="card">
              <div class="card-head">
                <h3>Timeline</h3><div class="muted">Calendar & class schedule</div>
              </div>
              <div class="calendar-placeholder">
                <!-- Replace with Google Calendar iframe or calendar widget -->
                <div class="muted">Calendar view placeholder ‚Äî integrate Google Calendar here.</div>
                <div class="small muted">Upcoming: <span id="nextEvent">No events</span></div>
              </div>
            </div>

            <div class="card">
              <div class="card-head">
                <h3>Analytics</h3><div class="muted">Productivity at a glance</div>
              </div>
              <div class="analytics">
                <div class="chart-row">
                  <div class="mini-chart">
                    <h4>Today Focus</h4>
                    <div class="bar-wrap"><div id="focusBar" class="bar"></div></div>
                    <div class="muted small">Time focused: <span id="timeFocused">0h</span></div>
                  </div>

                  <div class="mini-chart">
                    <h4>Completion</h4>
                    <div class="bar-wrap"><div id="completeBar" class="bar"></div></div>
                    <div class="muted small">Completed: <span id="completePct">0%</span></div>
                  </div>
                </div>

                <div class="muted small">ChronoKen Score: <strong id="ckScore">72</strong></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Other views placeholders -->
      <section id="view-missions" class="view">
        <div class="card full">
          <div class="card-head"><h3>All Missions</h3><div class="muted">Filter & manage</div></div>
          <div class="filter-row">
            <input id="filterSearch" placeholder="Filter by title..." />
            <select id="filterPriority">
              <option value="">All priorities</option>
              <option value="high">High</option>
              <option value="medium">Medium</option>
              <option value="low">Low</option>
            </select>
            <button id="clearFilters" class="btn ghost">Clear</button>
          </div>
          <ul id="allMissions" class="missions-list"></ul>
        </div>
      </section>

      <section id="view-timeslices" class="view">
        <div class="card full">
          <div class="card-head"><h3>Time Slices</h3><div class="muted">Generated plans</div></div>
          <div id="plansContainer"></div>
        </div>
      </section>

      <section id="view-timeline" class="view">
        <div class="card full">
          <div class="card-head"><h3>Timeline</h3><div class="muted">Calendar / classes</div></div>
          <div class="muted">Calendar placeholder ‚Äî integrate freebusy API to place slices into free slots.</div>
        </div>
      </section>

      <section id="view-focus" class="view">
        <div class="card full">
          <div class="card-head"><h3>Focus Mode</h3><div class="muted">Start deep sessions</div></div>
          <div class="focus-large">
            <div id="bigTimer" class="timer large">25:00</div>
            <div class="focus-controls">
              <button id="bigStart" class="btn primary">Start Session</button>
              <button id="bigPause" class="btn">Pause</button>
              <button id="bigReset" class="btn ghost">Reset</button>
            </div>
          </div>
        </div>
      </section>

      <section id="view-scrolls" class="view">
        <div class="card full">
          <div class="card-head"><h3>Scrolls</h3><div class="muted">All notes</div></div>
          <div id="allNotes" class="notes-list"></div>
        </div>
      </section>

      <section id="view-analytics" class="view">
        <div class="card full">
          <div class="card-head"><h3>Analytics</h3><div class="muted">Detailed stats</div></div>
          <div class="analytics-detailed">
            <div class="muted">This area can hold charts, streak data and downloadable reports.</div>
          </div>
        </div>
      </section>

      <section id="view-summon" class="view">
        <div class="card full chat-card">
          <div class="card-head"><h3>Summon Ken</h3><div class="muted">Chat with your agent</div></div>
          <div id="chatWindow" class="chat-window"></div>
          <div class="chat-input" style="display:flex;gap:8px;align-items:center">
            <input id="chatText" placeholder="Ask ChronoKen..." style="flex:1" />
            <button id="inline-generate-plan" class="btn ghost" title="Generate plan">Plan</button>
            <button id="sendChat" class="btn primary">Send</button>
          </div>
        </div>
      </section>

    </main>
  </div>

  <script src="dashboard.js"></script>

  <!-- Summon Ken modal (floating chat) -->
  <div id="summon-modal" class="summon-modal" aria-hidden="true">
    <div class="summon-overlay"></div>
    <div class="summon-card" role="dialog" aria-label="Ken chat">
      <header class="summon-header">
        <div class="summon-left">
          <div class="summon-avatar">‚öîÔ∏è</div>
          <div>
            <div class="summon-name">Ken</div>
            <div class="summon-sub muted">AI Agent Assistant</div>
          </div>
        </div>
        <button id="summon-close" class="summon-close">‚úï</button>
      </header>

      <div class="summon-body">
        <div id="summon-chat-window" class="chat-window"></div>
      </div>

      <footer class="summon-footer">
        <div id="summon-status" class="summon-status" aria-hidden="true">
          <span class="spinner" id="summon-spinner" aria-hidden="true"></span>
          <span id="summon-elapsed" class="summon-elapsed" aria-hidden="true"></span>
        </div>
        <input id="summon-chat-input" class="summon-input" placeholder="Ask Ken anything..." />
        <button id="summon-generate-plan" class="btn ghost" title="Generate plan">Plan</button>
        <button id="summon-send" class="summon-send">‚úà</button>
      </footer>
    </div>
  </div>

  <!-- Profile modal -->
  <div id="profile-modal" class="profile-modal" aria-hidden="true" style="display:none;position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);z-index:1200;background:#0b1220;padding:18px;border-radius:8px;box-shadow:0 8px 30px rgba(0,0,0,0.6);width:320px;color:#fff">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
      <strong>Profile</strong>
      <button id="profile-close" style="background:none;border:none;color:#fff;font-size:18px;cursor:pointer">‚úï</button>
    </div>
    <div style="display:flex;gap:12px;align-items:center;margin-bottom:8px">
      <img id="profile-preview" src="https://i.pravatar.cc/64?img=12" alt="avatar" style="width:64px;height:64px;border-radius:8px;object-fit:cover;border:1px solid rgba(255,255,255,0.06)" />
      <div style="flex:1">
        <div id="profile-name" style="font-weight:600">User</div>
        <div style="font-size:12px;color:#cbd5e1">Change your profile picture</div>
      </div>
    </div>
    <input id="profile-file" type="file" accept="image/*" style="width:100%;margin-bottom:8px" />
    <div style="display:flex;justify-content:flex-end;gap:8px">
      <button id="profile-cancel" class="btn ghost small">Cancel</button>
      <button id="profile-save" class="btn small">Save</button>
    </div>
  </div>
</body>
</html>
